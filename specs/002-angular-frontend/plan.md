# Implementation Plan: Angular Frontend Modulith Integration

**Branch**: `002-angular-frontend` | **Date**: 2025-01-27 | **Spec**: `specs/002-angular-frontend/spec.md`  
**Input**: Feature specification from `specs/002-angular-frontend/spec.md`

**Note**: This plan is generated by `/speckit.plan` and will guide design and implementation for integrating an Angular V20 frontend application as a new modulith in the MoneyTree API project.

## Summary

This feature integrates an Angular V20 frontend application from the MoneyPlant project as a new modulith in the MoneyTree API repository. The frontend will be copied from the source location, updated to work with the new backend API (including UUID migration for all entity IDs), configured to run on port 4200 as a separate development server with API proxying to the backend on port 8080, and provided with coordinated startup scripts. The frontend must be updated to use UUID strings instead of numeric IDs and must not reference nse_* database tables.

## Technical Context

**Language/Version**: TypeScript (Angular V20), Node.js/npm for build tooling  
**Primary Dependencies**: Angular 20.3.3, Angular CLI 20.3.4, Angular DevKit Build Angular 20.3.4, TypeScript 5.8.3, Node.js and npm for dependency management  
**Storage**: N/A (frontend is stateless; data persisted via backend API)  
**Testing**: Angular testing framework (Karma/Jasmine), end-to-end testing capabilities  
**Target Platform**: Web browser (development server on port 4200, proxying to backend on port 8080)  
**Project Type**: Frontend web application modulith (separate from backend modulith)  
**Performance Goals**: Frontend loads within 3 seconds of both services starting; 100% of static assets load successfully; all API requests complete successfully  
**Constraints**: Must run on port 4200 as separate development server; must proxy API requests to backend on port 8080; must support hot-reload during development; no authentication required for development setup  
**Scale/Scope**: Single frontend application modulith; all entity models and services must be updated to use UUIDs; must not use nse_* tables; coordinated startup scripts required

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

- **HFT Safety & Regulatory Compliance**: This feature is a frontend application that displays trading data and interfaces; it does not directly place orders or modify trading logic. The frontend will interact with the backend API which enforces all safety and regulatory constraints. No violations.

- **Deterministic Low-Latency Execution**: This is a development-only frontend setup with no production deployment requirements in this phase. Performance goals (3-second load time) are appropriate for development. The frontend does not impact critical trading paths. No violations.

- **Modulith Architecture & Bounded Contexts**: This feature adds a new frontend modulith alongside the existing backend modulith, maintaining clear separation. The frontend communicates with the backend only via well-defined API endpoints. This aligns with modulith principles by keeping the frontend as a separate, independently deployable unit while maintaining clear boundaries. No violations.

- **Market Connectivity & Resilience (Zerodha Kite API)**: The frontend does not interact directly with Kite API; all market data flows through the backend API. No violations.

- **Time-Series Persistence & Observability (TimescaleDB)**: The frontend does not access the database directly; all data access goes through the backend API. The frontend must be updated to use UUID-based entity identifiers to match the new database schema. No violations.

**Gate Result (pre-Phase 0)**: PASS — no constitution violations identified for this feature. The frontend modulith maintains clear boundaries with the backend and does not interfere with trading logic or database access.

## Project Structure

### Documentation (this feature)

```text
specs/002-angular-frontend/
├── plan.md              # This file (/speckit.plan command output)
├── research.md          # Phase 0 output (/speckit.plan command)
├── data-model.md        # Phase 1 output (/speckit.plan command)
├── quickstart.md        # Phase 1 output (/speckit.plan command)
├── contracts/           # Phase 1 output (/speckit.plan command)
└── tasks.md             # Phase 2 output (/speckit.tasks command - NOT created by /speckit.plan)
```

### Source Code (repository root)

```text
moneytree-api/
├── backend/                      # Existing Java 21 modulith backend
│   └── [existing structure]
├── frontend/                     # NEW: Angular V20 frontend modulith
│   ├── src/
│   │   ├── app/
│   │   │   ├── features/         # Feature modules (portfolios, screeners, etc.)
│   │   │   ├── services/         # API services (updated for UUIDs)
│   │   │   ├── entities/        # Entity models (updated for UUIDs)
│   │   │   └── core/             # Core components, guards, etc.
│   │   ├── assets/               # Static assets
│   │   ├── environments/         # Environment configuration
│   │   └── index.html
│   ├── projects/                 # Angular library projects (dashboards, querybuilder)
│   ├── angular.json              # Angular workspace configuration
│   ├── package.json              # Dependencies
│   ├── tsconfig.json             # TypeScript configuration
│   ├── proxy.conf.json           # API proxy configuration (port 4200 → 8080)
│   └── start-dev.sh              # NEW: Coordinated startup script
├── start-all.sh                  # NEW: Root-level script to start both services
└── specs/
    └── 002-angular-frontend/     # This feature's documentation
```

**Structure Decision**: Create a new `frontend/` modulith directory at the repository root, parallel to the existing `backend/` modulith. The frontend will be a complete Angular workspace with its own source structure, configuration files, and build tooling. Coordinated startup scripts will be provided at both the frontend level and repository root level to start both services together.

## Complexity Tracking

> **Fill ONLY if Constitution Check has violations that must be justified**

| Violation | Why Needed | Simpler Alternative Rejected Because |
|-----------|------------|-------------------------------------|
| [None] | [N/A] | [N/A] |

## Phase 0: Research Complete

All research questions have been resolved. Key decisions documented in `research.md`:

- Angular development server configuration with proxy
- Coordinated startup scripts using shell scripts
- UUID migration strategy using TypeScript type system
- Source file copy strategy using rsync with exclusions
- API contract compatibility handling approach
- nse_* table exclusion strategy

**Status**: ✅ Complete - All technical questions resolved, no NEEDS CLARIFICATION items remain.

## Phase 1: Design Complete

Design artifacts have been created:

- **data-model.md**: Entity models with UUID-based identifiers, migration checklist
- **contracts/api-endpoints.md**: Backend API endpoint documentation for frontend consumption
- **quickstart.md**: Step-by-step setup and verification guide

**Status**: ✅ Complete - All design documents created, ready for implementation.

## Constitution Check (Post-Design)

*Re-checked after Phase 1 design*

**Gate Result (post-Phase 1)**: PASS — no constitution violations identified. The design maintains clear modulith boundaries, does not interfere with trading logic, and follows all constitutional principles.

## Next Steps

The implementation plan is complete. Ready to proceed with:

1. **Task Breakdown**: Run `/speckit.tasks` to create detailed implementation tasks
2. **Implementation**: Begin copying frontend source files and setting up the modulith
3. **UUID Migration**: Systematically update all entity models and services
4. **Testing**: Verify frontend loads, API connectivity, and UUID handling

**Suggested Next Command**: `/speckit.tasks` to break down the implementation into actionable tasks.
