<p-panel>
  <ng-template pTemplate="header">
    <div class="widget-header-content">
      <!-- Left side: Cog button -->
      <div class="widget-header-left">
        <p-button #menuButton
                  [outlined]="true" 
                  class="p-button-sm" 
                  type="button" 
                  icon="pi pi-cog"
                  (click)="menu.toggle($event)">
        </p-button>
        @if (onEditMode) {
          <p-button class="p-button-sm ml-2" type="button" (click)="onDeleteWidgetClicked($event)"
                    [outlined]="true"
                    icon="pi pi-trash"></p-button>

          <p-button [outlined]="true" class="p-button-sm ml-2" type="button" (click)="sidebarVisible = true" [outlined]="true"
                    icon="pi pi-cog"></p-button>
        }
      </div>
      
      <!-- Center: Title -->
      <div class="widget-header-center">
        <span class="widget-header-title">{{ title }}</span>
      </div>
      
      <!-- Right side: Icons container (for dynamically added time range filters) -->
      <div class="widget-header-right p-panel-header-icons">
        <!-- Time range filters will be dynamically inserted here -->
      </div>
    </div>
  </ng-template>
</p-panel>

<!-- Widget Actions Menu -->
<p-menu #menu 
        [model]="menuItems" 
        [popup]="true" 
        appendTo="body">
</p-menu>

<!-- Settings Drawer -->
<p-drawer [(visible)]="sidebarVisible" position="right" [modal]="false" [appendTo]="'body'" [style]="{
      'width': '30%',
      height: '100%',
      padding: '0px',
      'padding-right': '2px',
    }">
  <ng-template pTemplate="header">
    <div class="font-bold ml-3 mb-3 text-lg">
      {{ title }} Settings
    </div>
  </ng-template>
  <vis-widget-config [selectedDashboardId]="dashboardId" [widget]="widget" (onUpdate)="onUpdateOptions($event)"/>
</p-drawer>
